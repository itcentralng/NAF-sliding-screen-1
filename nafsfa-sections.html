<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../static/css/all.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/sections.css">
  <link rel="stylesheet" href="css/broken-glass-transition.css">
  <title>NAFSFA Sections</title>
</head>
<body>
  <header>
    <nav class="navbar glass-background">
      <div class="nav-header">
        <button class="back-btn" onclick="navigateBack()">
          <i class="fas fa-arrow-left"></i>
          Back to Distinguished Personalities
        </button>
        <div class="nav-title">
          <h2>NAFSFA Distinguished Personalities</h2>
          <p>Explore the distinguished leaders of NAFSFA</p>
        </div>
      </div>
    </nav>
  </header>
  <section>
    <div class="section-container">
      <div class="section-list">
        <div class="section glass-background commandants">
            <a href="commandants-nafsfa-updated.html">
              <img src="img/unsplash_gNPb-LuL0SM.png" alt="">
              <h2>Commandants</h2>
              <p>Visionary leaders who have commanded the NAFSFA</p>
            </a>
          </div>
          <div class="section glass-background instructors">
            <a href="chief-instructors-nafsfa.html">
              <img src="img/unsplash_gNPb-LuL0SM (1).png" alt="">
              <h2>Chief Instructors</h2>
              <p>Expert educators who have shaped NAFSFA's academic excellence</p>
            </a>
          </div>
          <div class="section glass-background directors">
            <a href="directors-nafsfa.html">
              <img src="img/unsplash_gNPb-LuL0SM (2).png" alt="">
              <h2>Directors</h2>
              <p>Administrative leaders who have guided NAFSFA's operations</p>
            </a>
          </div>
      </div>
    </div>
  </section>
  <script src="js/socket.io.min.js"></script>
  <script src="js/navigation-helper.js"></script>
  <script src="js/broken-glass-transition.js"></script>
  <script>
    // Function to navigate back to distinguished personalities without transition
    function navigateBack() {
      // Add visual feedback to back button
      const backBtn = document.querySelector('.back-btn');
      backBtn.style.transform = 'translateX(-5px) scale(0.95)';
      backBtn.style.transition = 'transform 0.3s ease';
      
      // Navigate directly back without any transition
      setTimeout(() => {
        window.location.href = 'distinguished-personalities.html';
      }, 200);
    }

    // Initialize socket connection
    const socket = io.connect("http://127.0.0.1:5550");

    // Socket event listeners
    socket.on('connect', function() {
      console.log('Connected to server');
    });
    
    socket.on('arduino_response', function(data) {
      console.log('Arduino response:', data);
    });
    
    socket.on('disconnect', function() {
      console.log('Disconnected from server');
    });
    
    // Page fade-in effect
    document.addEventListener('DOMContentLoaded', function() {
      document.body.style.opacity = '0';
      document.body.style.transition = 'opacity 0.6s ease-in';
      
      setTimeout(() => {
        document.body.style.opacity = '1';
      }, 100);
      
      // Add staggered animation to section cards
      const sections = document.querySelectorAll('.section');
      sections.forEach((section, index) => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(30px)';
        section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        
        setTimeout(() => {
          section.style.opacity = '0.7';
          section.style.transform = 'translateY(0)';
        }, 200 + (index * 150));
      });
      
      // Add click transition effects with broken glass
      sections.forEach(section => {
        const link = section.querySelector('a');
        if (link) {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Get section short name based on class
            let sectionName = '';
            if (section.classList.contains('commandants')) {
              sectionName = 'commandants';
            } else if (section.classList.contains('instructors')) {
              sectionName = 'instructors';
            } else if (section.classList.contains('directors')) {
              sectionName = 'directors';
            }
            
            // Send section name to socket
            if (sectionName) {
              socket.emit('send_to_arduino', {
                text: sectionName
              });
              console.log('Sent to Arduino:', sectionName);
            }
            
            // Add loading state to clicked section
            section.style.transform = 'scale(0.95)';
            section.style.opacity = '1';
            section.style.transition = 'all 0.3s ease';
            
            // Execute broken glass transition
            const targetUrl = this.href;
            if (typeof glassTransition !== 'undefined') {
              glassTransition.execute(targetUrl, e);
            } else {
              // Fallback to direct navigation
              setTimeout(() => {
                window.location.href = targetUrl;
              }, 400);
            }
          });
        }
      });
      
      console.log('NAFSFA sections page loaded.');
    });
    
    // Add CSS for back button styling
    const backButtonStyle = document.createElement('style');
    backButtonStyle.textContent = `
      .nav-header {
        display: flex;
        align-items: center;
        gap: 20px;
        width: 100%;
      }
      
      .nav-title {
        flex: 1;
      }
      
      .back-btn {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: white;
        padding: 10px 20px;
        border-radius: 8px;
        font-family: 'Cinzel', serif;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
        backdrop-filter: blur(5px);
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .back-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.4);
        transform: translateX(-2px);
      }
      
      .back-btn i {
        font-size: 12px;
      }
      
      /* Adjust section grid for 3 sections instead of 4 */
      .section-list {
        display: grid;
        grid-template-columns: repeat(3, 350px);
        grid-template-rows: 300px;
        justify-content: center;
        align-items: stretch;
        gap: 2rem;
        padding: 50px;
      }
      
      @media (max-width: 1200px) {
        .section-list {
          grid-template-columns: repeat(2, 350px);
          grid-template-rows: repeat(2, 300px);
          gap: 1.5rem;
        }
      }
      
      @media (max-width: 768px) {
        .nav-header {
          flex-direction: column;
          align-items: center;
          text-align: center;
          gap: 15px;
        }
        
        .back-btn {
          order: -1;
          font-size: 12px;
          padding: 8px 16px;
        }
        
        .section-list {
          grid-template-columns: 1fr;
          grid-template-rows: repeat(3, 280px);
          padding: 0 20px;
          gap: 1rem;
        }
      }
    `;
    document.head.appendChild(backButtonStyle);
  </script>
</body>
</html>
